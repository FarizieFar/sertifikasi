<!DOCTYPE html>
<html>
<head>
  <title>Kategori Surat</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
  
  <!-- Import font dari Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      font-family: 'Poppins', sans-serif; /* Terapkan font ke seluruh body */
    }

    .foto-profil {
      width: 100px;
      height: 100px;
      object-fit: cover;
    }

    h1 {
      font-weight: 600;
      color: #0d6efd; /* Biru ala Bootstrap */
    }

    h3 {
      font-weight: 500;
    }

    p {
      font-size: 15px;
      color: #555;
    }
  </style>
</head>
<body class="container mt-4">
  <h1>Kategori Surat</h1>
  <div class="mb-3">
    <input id="newCat" class="form-control d-inline w-50" placeholder="Nama kategori baru">
    <button class="btn btn-success" onclick="addCategory()">Tambah</button>
    <a href="index.html" class="btn btn-secondary">Kembali</a>
  </div>
  <table class="table table-bordered">
    <thead><tr><th>Nama</th><th>Aksi</th></tr></thead>
    <tbody id="catTable"></tbody>
  </table>

  <script>
    async function loadCategories(){
      let res = await fetch('/api/categories');
      let cats = await res.json();
      document.getElementById('catTable').innerHTML = cats.map(c=>`
        <tr>
          <td><input value="${c.name}" onchange="updateCategory(${c.id},this.value)" class="form-control"></td>
          <td><button class="btn btn-sm btn-danger" onclick="delCategory(${c.id})">Hapus</button></td>
        </tr>
      `).join('');
    }
    async function addCategory(){
      let name=document.getElementById('newCat').value;
      if(!name) return alert("Nama kosong");
      await fetch('/api/categories',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({name})});
      document.getElementById('newCat').value="";
      loadCategories();
    }
    async function updateCategory(id,name){
      await fetch('/api/categories/'+id,{method:'PUT',headers:{'Content-Type':'application/json'},body:JSON.stringify({name})});
    }
    async function delCategory(id){
      if(confirm("Yakin hapus kategori?")){
        await fetch('/api/categories/'+id,{method:'DELETE'});
        loadCategories();
      }
    }
    loadCategories();
  </script>
</body>
</html>
